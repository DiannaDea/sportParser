<!DOCTYPE html>
<html>
<head>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src="/javascript/renderNews.js" ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
<% include navbar.ejs %>
<div class="container">
    <div class="site-title">
        <h1><%= title%></h1>
    </div>
    <div class="filter-container">
        <label for="date">Дата</label>
        <input id="date" type="date"  value="<%= latestDate%>"/>
        <br/>
        <label for="dates-slider">Время</label>
        <input type="range" min="1" max="<%= countNews%>" value="<%= countNews%>" id="dates-slider">
        <br/><br/>
        <div id="date-placeholder"><%= latestTime%></div>

    </div>

    <div class="container-news">

        <div class="container-long-news">
            <% longNews.map((item, i) => {%>
            <div class="news-item shadow-wrap item-long ">
                <% if(i === 0) {%>
                <div class="container-header">
                    <h1>TOP NEWS</h1>
                </div>
                <%} %>
                <div class="container-body">
                    <div class="item-media">
                        <img src="<%= item._doc.imageSrc%>"  alt="<%= item._doc.title%>"/>
                    </div>
                    <div class="item-info">
                        <div class="item-title">
                            <h2><%= item._doc.title%></h2>
                        </div>
                        <div class="item-description">
                            <p><%= item._doc.description%></p>
                        </div>
                    </div>
                </div>

            </div>

            <%})%>
        </div>
        <% if(shortNews.length !== 0) {%>
        <div class="container-short-news shadow-wrap">
            <h1>TOP HEADERS</h1>
            <% shortNews.map(item => {%>
            <h3><%= item._doc.title%></h3>
            <%})%>
        </div>
        <%} %>


    </div>
</div>

<script>
    $( document ).ready(function(){
        let datesAndTimes = JSON.parse('<%- datesAndTimesNews%>');
        let date = '<%- latestDate %>';
        let time = '<%- latestTime%>';
        startRenderNews(date, time, datesAndTimes);
    });
</script>
</body>
</html>
